\documentclass[a4paper,12pt]{article}
\usepackage{amsmath}
\usepackage{geometry}
\usepackage{multicol}
\geometry{margin=1.5cm}
\setlength{\parindent}{0pt}
\pagestyle{empty}
\setlength{\columnseprule}{0.4pt}
\begin{document}

    \section*{Formulary - Advanced Computer Architecture (2024/2025)}

    This formulary has been made for the final exam. It might contain some mistakes or might be incomplete. However, this is what I bring to my exam, and maybe it can be useful for someone else.

    \pagebreak

    \begin{multicols}{2}

    \textbf{\underline{Performance Metrics}}
    \\
    Performance:
    \begin{equation*}
        \text{Performance} = \frac{1}{\text{Execution Time}}
    \end{equation*}
    Relative Performance:
    \begin{equation*}
        \begin{array}{rcl}
            \text{Perf}(X) &=& \left(1+\frac{n}{100}\right) \times \text{Perf}(Y) \\ [.5em]
            \text{ExecTime}(Y) &=& \left(1+\frac{n}{100}\right) \times \text{ExecTime}(X)
        \end{array}
    \end{equation*}
    Clock Frequency:
    \begin{equation*}
        f_{CLK} = \frac{1}{T_{CLK}}
    \end{equation*}
    \textbf{\underline{CPU Time}}
    \begin{equation*}
        \text{CPU Time} = \text{IC} \times \text{CPI} \times T_{CLK}
    \end{equation*}
    \textbf{\underline{Instruction Metrics}}
    \\
    IPC:
    \begin{equation*}
        \text{IPC} = \frac{1}{\text{CPI}}
    \end{equation*}
    Weighted Average CPI:
    \begin{equation*}
        \begin{array}{rcl}
            \text{CPI} &=& \displaystyle\sum_{i=1}^{n} (\text{CPI}_i \times \text{F}_i) \\ [1.4em]
            \text{F}_i &=& \dfrac{\text{I}_i}{\text{IC}}
        \end{array}
    \end{equation*}
    \textbf{\underline{MIPS}}
    \\
    Using clock frequency:
    \begin{equation*}
        \text{MIPS} = \dfrac{f_{CLK}}{\text{CPI} \times 10^6}
    \end{equation*}
    Using execution time:
    \begin{equation*}
        \text{MIPS} = \dfrac{\text{IC}}{\text{Execution Time} \times 10^6}
    \end{equation*}
    \textbf{\underline{Memory Hierarchy}}
    \\
    Average Memory Access Time (AMAT):
    \begin{equation*}
        \text{AMAT} = \text{Hit Time} + \text{Miss Rate} \times \text{Miss Penalty}
    \end{equation*}
    Hierarchical (L1, L2):
    \begin{equation*}
        \begin{array}{rl}
            \text{AMAT} =& \text{L1 Hit Time} + \text{L1 Miss Rate } \times \\
            & ( \\
            &  \phantom{(}\quad\text{L2 Hit Time } + \\
            &  \phantom{(}\quad \text{L2 Miss Rate} \times \text{L2 Miss Penalty} \\
            & )
        \end{array}
    \end{equation*}
    \textbf{\underline{Pipeline Performance}}
    \\
    Ideal CPI:
    \begin{equation*}
        \text{CPI}_{ideal} = 1
    \end{equation*}
    Realistic CPI:
    \begin{equation*}
        \text{CPI} = 1 + \text{Stall Cycles per Instruction}
    \end{equation*}
    Clock Cycles:
    \begin{equation*}
        \text{Clock Cycles} = \text{IC} + \text{Stall Cycles} + 4
    \end{equation*}
    CPI in pipeline:
    \begin{equation*}
        \text{CPI} = \frac{\text{Clock Cycles}}{\text{IC}}
    \end{equation*}
    MIPS in pipeline:
    \begin{equation*}
        \text{MIPS} = \frac{f_{CLK}}{\text{CPI} \times 10^6}
    \end{equation*}
    Pipeline Speedup:
    \begin{equation*}
        \text{Speedup}_{\text{pipeline}} = \frac{\text{Avg Exec Time Unpipelined}}{\text{Avg Exec Time Pipelined}}
    \end{equation*}
    \textbf{\underline{Loops in Pipelines}}
    \\
    Clock Cycles per iteration:
    \begin{equation*}
        \text{Cycles}_{\text{iter}} = m + k + 4
    \end{equation*}
    CPI per iteration:
    \begin{equation*}
        \text{CPI}_{\text{iter}} = \frac{m+k+4}{m}
    \end{equation*}
    Asymptotic ($n$ iterations):
    \begin{equation*}
        \text{CPI}_{\infty} = \frac{m+k}{m}
    \end{equation*}
    \textbf{\underline{Amdahl's Law}}
    \\
    Speedup:
    \begin{equation*}
        \text{Speedup}(E) = \frac{1}{(1-\text{F})+\frac{\text{F}}{\text{S}}}
    \end{equation*}
    Maximum theoretical speedup:
    \begin{equation*}
        \text{Speedup}_{\max} = \frac{1}{1-\text{F}}
    \end{equation*}

    \end{multicols}

    \vfill

    \small{Note: \textit{IC = Instruction Count, CPI = Cycles per Instruction, \( f_{CLK} \) = Clock Frequency, \( T_{CLK} \) = Clock Cycle Time}}

\end{document}